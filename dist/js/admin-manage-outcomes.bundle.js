document.addEventListener("DOMContentLoaded",function(){const i=document.getElementById("refreshPage");i&&i.addEventListener("click",()=>window.location.reload());const c=document.getElementById("editOutcomeDetailModal");document.getElementById("editOutcomeDetailForm");const d=document.getElementById("saveOutcomeDetailBtn"),a=document.getElementById("editItemsContainer");let l=null;function r(t){l=t,fetch(`/app/ajax/admin_outcomes.php?id=${t}`).then(e=>e.json()).then(e=>{e.success?(a.innerHTML=`
                        <div class="mb-3">
                            <label class="form-label">Title</label>
                            <input type="text" class="form-control" id="editOutcomeTitle" value="${e.data.title||""}" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Description</label>
                            <textarea class="form-control" id="editOutcomeDescription" rows="3" required>${e.data.description||""}</textarea>
                        </div>
                    `,window.bootstrap&&c&&window.bootstrap.Modal.getOrCreateInstance(c).show()):n(e.error||"Failed to load outcome details")}).catch(()=>n("Failed to load outcome details"))}d&&d.addEventListener("click",function(){const t=document.getElementById("editOutcomeTitle").value.trim(),e=document.getElementById("editOutcomeDescription").value.trim();if(!t||!e){n("Title and description are required");return}fetch("/app/ajax/admin_outcomes.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:l,title:t,description:e})}).then(o=>o.json()).then(o=>{o.success?(u("Outcome updated successfully"),setTimeout(()=>window.location.reload(),1e3)):n(o.error||"Failed to update outcome")}).catch(()=>n("Failed to update outcome"))});function n(t){const e=document.getElementById("errorContainer");e&&(e.textContent=t,e.style.display="block")}function u(t){const e=document.getElementById("successContainer");e&&(e.textContent=t,e.style.display="block")}document.querySelectorAll('a.btn-outline-warning[title="Edit Outcome"]').forEach(t=>{t.addEventListener("click",function(e){e.preventDefault();const s=new URL(t.href,window.location.origin).searchParams.get("id");s&&r(s)})})});
